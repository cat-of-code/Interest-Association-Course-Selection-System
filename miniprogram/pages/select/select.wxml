<navBar
  titleName="广研兴趣协会预约系统"
  showLeftArrow="{{ false }}"
/>
<view class="tabs">
  <van-tabs 
    type="card" 
    animated 
    color="{{ color }}"
    active="{{ selection }}"
    bind:click="chooseActivity"
  >
    <van-tab title="每日活动">
      <van-tabs 
        active="{{ active }}" 
        title-active-color="{{ color }}"
        bind:click="clickTheDateActivity"
      >
        <block 
          wx:for="{{ dates }}" 
          wx:for-item="it" 
          wx:key="key"
        >
          <van-tab 
            title="{{ it.month }}月 {{it.day }}" 
            title-active-color="{{ color }}"
            name="key"            
          >
            <van-empty 
              wx:if="{{ it.empty }}"
              description="今日暂无活动" 
            />
            <!--活动列表-->
            <block
              wx:if="{{ !it.empty }}"
              wx:for="{{ it.activities }}"
              wx:for-item="item"
              wx:for-index="idx"
              wx:key="index"
            >
              <view class="card">
                <cover-image 
                  bindtap="navigateToActivity"
                  data-idx="{{ idx }}"  
                  src="{{ item.img }}"
                  style="opacity: {{ 0.8 }}; border-radius: 20rpx;"
                ></cover-image>
                <!-- 颜色好丑 -->
                <view 
                  style="position: absolute; left: 20rpx; top: 20rpx; color: white; background-color: {{ color }}; opacity: {{ 0.9 }}; padding: 15rpx; border-radius: 10rpx;"
                >
                  <view
                    style="font-size: 40rpx; margin-bottom: 10rpx;"
                  >{{ item.course_name }}</view>
                  <view
                    style="font-size: 50rpx; margin-bottom: 10rpx;"
                  >{{ item.course_start_time }} ~ {{ item.course_end_time }}</view>
                  <view
                    style="font-size: 40rpx; margin-bottom: 10rpx;"
                  >{{ item.address }}</view>
                </view>
                <van-button  
                  round="{{ true }}"
                  type="primary"
                  style="position: absolute; right: 10rpx; top: 35%; opacity: {{ 0.9 }};"
                  color="{{ color }}"
                  data-idx="{{ idx }}" 
                  bind:click="reserveBtn"
                  size="small"
                >预约</van-button>       
              </view>
            </block>
          
          </van-tab>
        </block>
      </van-tabs>
    </van-tab>
    <van-tab title="协会信息">
      <!--协会列表-->
      <block
        wx:for="{{ associations }}"
        wx:for-item="item"
        wx:key="key"
        wx:for-index="idx"
      >
          <view class="panel">
            <image 
              src="{{ item.association_logo }}"
            ></image>
            <view 
              style="color: white; padding-left: 10rpx;"
            >{{item.association_name}}</view>
            <view 
              style="color: white; padding-left: 10rpx;"
            >{{item.manager_phone}}</view>
            <van-button  
              type="primary"
              round="{{ true }}"
              color="{{ color }}"
              size='small'
              style="position: absolute; right: 10rpx;"
              data-idx="{{ idx }}"
              bind:click="navigateToAssociationDetail"
            >协会详情</van-button>
          </view>
      </block>
    </van-tab>
  </van-tabs>
</view>