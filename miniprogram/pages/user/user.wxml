<navBar 
  titleName="我的"
  showNavBar="{{ true }}"
  showLeftArrow="{{ false }}"
/>
 <!--登录之后的页面-->
<block wx:if="{{login}}"> 
  <view class="user">
    <image src='{{userInfo.avatarUrl}}'></image>
    <text>{{userInfo.nickName}}</text>
  </view>
  <view style="height: 10rpx;"></view>
  <!-- TODO: 点击图标跳转到相应页面 -->
  <van-grid gutter="{{ 10 }}" column-num="3" >
    <block 
      wx:for="{{ projets }}"  
      wx:for-item="item" 
      wx:key="key"
    >
      <van-grid-item 
        icon="{{ item.icon }}" 
        text="{{ item.text }}" 
        link-type="navigateTo"
        url="{{ item.redirectUrl }}"
      />
    </block>
  </van-grid>
  <!-- 协会管理员的专属功能 -->
  <van-grid 
    gutter="{{ 10 }}" 
    column-num="3" 
    wx:if="{{ managerLogin }}"
  >
    <block 
      wx:for="{{ manages }}"  
      wx:for-item="item" 
      wx:key="key"
    >
      <van-grid-item 
        icon="{{ item.icon }}" 
        text="{{ item.text }}" 
        link-type="navigateTo"
        url="{{ item.redirectUrl }}"
      />
    </block>
  </van-grid>
  <view style="height: 10rpx;"></view>
  <van-button 
    wx:if="{{ !managerLogin }}"
    icon="manager-o"
    type='warning'
    plain
    round="{{ true }}"
    style="display: flex;  flex-direction: column;  align-items: center;"
    bind:click="managerLogout" 
    wx:if="{{ managerLogin }}"
  >
    退出协会管理员
  </van-button>
  <!-- TODO: 添加一个管理员登录的按钮，跳转到管理员登录页面 -->
  <van-button 
    wx:if="{{ !managerLogin }}"
    icon="manager-o"
    type='primary'
    plain
    round="{{ true }}"
    style="display: flex;  flex-direction: column;  align-items: center;"
    color="{{ color }}"
    bind:click="managerLogin" 
  >
    协会管理员登录
  </van-button>
</block>
 <!--登录前的页面-->
<block wx:if="{{!login}}">
  <view class="login">
    <image src='../../img/logo1.png'></image>
    <!-- TODO: 样式有点丑 -->
    <view
      style="margin-top: 10rpx;"
    >
      广研兴趣协会预约系统
    </view>
    <view
      style="margin-top: 10rpx; margin-bottom: 20rpx;"
    >
      请确认授权以下信息
    </view>
    <van-button
      type='primary' 
      open-type='getUserInfo' 
      bindgetuserinfo='getUserInfo'
      plain = "{{ true }}"
      color="{{ color }}"
      custom-style="width: 320rpx"
      round="{{ true }}"
    >
      授权登录
    </van-button>
  </view>
</block>